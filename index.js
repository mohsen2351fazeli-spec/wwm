const data={
    mein:{
        firsttext:{
            en:"World War II, the greatest conflict in European history, from 1939 to 1945. Massive battles, brave soldiers, and the fate of millions were shaped. A journey into the epic and impactful events of history.",
            fa:"جنگ جهانی دوم، بزرگترین درگیری در تاریخ اروپا، از سال ۱۹۳۹ تا ۱۹۴۵. نبردهای عظیم، سربازان شجاع و سرنوشت میلیون‌ها نفر در این جنگ شکل گرفت. سفری به درون وقایع حماسی و تأثیرگذار تاریخ."
        },
        twotext:{
            en:"World War II was the largest and deadliest conflict in European history, lasting from 1939 to 1945. The war began with Nazi Germany’s invasion of Poland and quickly spread across Europe, reaching parts of North Africa and Scandinavia. Millions lost their lives, and cities and infrastructure were devastated. Major battles in France, the Soviet Union, Normandy, Stalingrad, and Britain turned Europe into an extensive battlefield whose impact is still felt today. Prominent military leaders, complex strategies, and advanced military technology reshaped the course of European history. Studying this war helps us understand not only historical events but also the human, political, and social consequences, offering lessons from past decisions and actions for the future.",
            fa:"جنگ جهانی دوم بزرگترین و مرگبارترین درگیری در تاریخ اروپا بود که از سال ۱۹۳۹ تا ۱۹۴۵ ادامه داشت. این جنگ با حمله آلمان نازی به لهستان آغاز شد و به سرعت در سراسر اروپا گسترش یافت و به بخش‌هایی از شمال آفریقا و اسکاندیناوی رسید. میلیون‌ها نفر جان خود را از دست دادند و شهرها و زیرساخت‌ها ویران شدند. نبردهای بزرگ در فرانسه، اتحاد جماهیر شوروی، نرماندی، استالینگراد و بریتانیا، اروپا را به یک میدان نبرد گسترده تبدیل کرد که تأثیر آن هنوز هم احساس می‌شود. رهبران نظامی برجسته، استراتژی‌های پیچیده و فناوری پیشرفته نظامی، مسیر تاریخ اروپا را تغییر شکل دادند. مطالعه این جنگ به ما کمک می‌کند تا نه تنها وقایع تاریخی، بلکه پیامدهای انسانی، سیاسی و اجتماعی آن را نیز درک کنیم و از تصمیمات و اقدامات گذشته برای آینده درس‌هایی ارائه دهیم."
        },
        timeline:{
            en:[
                "Rise of the Third Reich",
                "Anschluss",
                "Munich Conference",
                "Dismantling of Czechoslovakia",
                "The Danzig Crisis & Invasion of Poland",
                "Only Six Hours : Fall of Danmark",
                "The Northern Campaign",
                "Blitz in the West",
                "Dunkirk",
                "Führer in Paris",
                "The Battle of Britain",
                "Yugoslavia & Greece",
                "Barbarossa",
                "Battle of Stalingrad",
                "The Siege of Leningrad",
                "Battle of El Alamein",
                "The End of the Desert Fox",
                "Invasion of Sicily",
                "The Fall of Mussolini",
                "D-Day",
                "Ardennes: Last Hope",
                "Battle of Berlin: the End"
            ],
            fa:[
                "ظهور رایش سوم",
                "آنشلوس",
                "کنفرانس مونیخ",
                "تجزیه چکسلواکی",
                "بحران دانتزیگ و تهاجم به لهستان",
                "فقط شش ساعت: سقوط دانمارک",
                "لشکرکشی شمالی",
                "حمله برق‌آسا در غرب",
                "دانکرک",
                "پیشوا در پاریس",
                "نبرد بریتانیا",
                "یوگسلاوی و یونان",
                "بارباروسا",
                "نبرد استالینگراد",
                "محاصره لنینگراد",
                "نبرد العلمین",
                "پایان روباه صحرا",
                "تهاجم به سیسیل",
                "سقوط موسولینی",
                "روز دی",
                "آردن: آخرین امید",
                "نبرد برلین: پایان",
            ]
        },
        greatspan:{
            en:[
                "“in the end, the truth will prevail, and truth is on our side”",
                "“Courage is what it takes to stand up and speak; courage is also what it takes to sit down and listen”",
                "“The only thing we have to fear is fear itself”",
                "“Sweat saves blood, blood saves lives, but brains save both”",
                "“A single death is a tragedy; a million deaths is a statistic”",
                "“People will believe what they want to believe”",
            ],
            fa:[
                " در نهایت، حقیقت پیروز خواهد شد، و حقیقت با ماست ",
                " شجاعت چیزی است که برای ایستادن و صحبت کردن لازم است؛ شجاعت همچنین چیزی است که برای نشستن و گوش دادن لازم است ",
                " تنها چیزی که باید از آن بترسیم، خودِ ترس است ",
                " عرق خون را نجات می‌دهد، خون جان‌ها را نجات می‌دهد، اما مغز هر دو را نجات می‌دهد ",
                " یک مرگ یک تراژدی است؛ یک میلیون مرگ یک آمار است ",
                " مردم چیزی را که می‌خواهند باور کنند، باور خواهند کرد ",
            ]
        },
        greatspangu:{
            en:["-Adolf Hitler","-Winston Churchill","-Franklin Roosevelt","-Erwin Rommel","-Joseph Stalin","-Joseph Goebbels"],
            fa:["آدولف هیتلر","وینستون چرچیل","فرانکلین روزولت","اروین رومل","جوزف استالین","جوزف گوبلز"]
        },
        pageexp:{
            en:"--turn the page--",
            fa:"--ورق بزنید--"
        },
        amarhed:{
            en:["Human Casualties","Tanks","Airplane","Resources"],
            fa:["تلفات انسانی","تانک ها","هواپیما ها","منابع"]
        },
        countries:{
            en:["Germany","USSR","France","USA","UK","UK Colonies"],
            fa:["آلمان","شوروی","فرانسه","آمریکا","انگلستان","مستعمرات انگلستان"]
        },
        footer:{
            en:"mohsen fazeli",
            fa:"محسن فاضلی",
        }
    },
    panel:{
        heads:{
            en:["Chracters","weapon","dark mod","language"],
            fa:["شخصیت ها","تسلیحات","حالت تاریک","زبان"]
        }
    }
}


const firsttext=document.querySelector(".firsttext")
const twotext=document.querySelector(".twotext")
const timeline=document.querySelectorAll(".timeline")
const greatspan=document.querySelectorAll(".greatspan")
const greatspangu=document.querySelectorAll(".greatspangu")
const pageexp=document.querySelector(".pageexp")
const amarhed=document.querySelectorAll(".amarhed")
const Germany=document.querySelectorAll(".Germany")
const USSR=document.querySelectorAll(".USSR")
const France=document.querySelectorAll(".France")
const USA=document.querySelectorAll(".USA")
const UK=document.querySelectorAll(".UK")
const Colonies=document.querySelector(".Colonies")
const footer=document.querySelector(".footer")
const ph=document.querySelectorAll(".ph")
const df=document.querySelector(".df")
const lf=document.querySelector(".lf")
const ef=document.querySelector(".ef")
const ff=document.querySelector(".ff")
const mohsen=document.querySelector(".mohsen")
const qq=document.querySelector(".panel")
const panelbtn=document.querySelector(".panel-btn")
const hidebtn=document.querySelector(".hide-panel")

const goat=()=>{
    ise=JSON.parse(localStorage.getItem("ise"))
    let x;
    if(ise){ x="en";
        df.innerHTML="dark"
        lf.innerHTML="light"
        ef.innerHTML="EN"
        ff.innerHTML="FA"
        firsttext.setAttribute("dir","ltr")
        twotext.setAttribute("dir","ltr")
        footer.setAttribute("dir","ltr")
        mohsen.setAttribute("dir","ltr")
        qq.setAttribute("dir","ltr")
        hidebtn.setAttribute("dir","ltr")
    }
    else{x="fa";
        df.innerHTML="تاریک"
        lf.innerHTML="روشن"
        ef.innerHTML="انگلیسی"
        ff.innerHTML="فارسی"
        firsttext.setAttribute("dir","rtl")
        twotext.setAttribute("dir","rtl")
        footer.setAttribute("dir","rtl")
        mohsen.setAttribute("dir","rtl")
        qq.setAttribute("dir","rtl")
        hidebtn.setAttribute("dir","ltr")
    }
        
    firsttext.innerHTML=data.mein.firsttext[x]
    twotext.innerHTML=data.mein.twotext[x]
    timeline.forEach((n,i)=>{
        n.innerHTML=data.mein.timeline[x][i]
    })
    greatspan.forEach((n,i)=>{
        n.innerHTML=data.mein.greatspan[x][i]
    })
    greatspangu.forEach((n,i)=>{
        n.innerHTML=data.mein.greatspangu[x][i]
    })
    pageexp.innerHTML=data.mein.pageexp[x]
    amarhed.forEach((n,i)=>{
        n.innerHTML=data.mein.amarhed[x][i]
    })
    Germany.forEach((n)=>{
        n.innerHTML=data.mein.countries[x][0]
    })
    USSR.forEach((n)=>{
        n.innerHTML=data.mein.countries[x][1]
    })
    France.forEach((n)=>{
        n.innerHTML=data.mein.countries[x][2]
    })
    USA.forEach((n)=>{
        n.innerHTML=data.mein.countries[x][3]
    })
    UK.forEach((n)=>{
        n.innerHTML=data.mein.countries[x][4]
    })
    Colonies.innerHTML=data.mein.countries[x][5];
    footer.innerHTML=data.mein.footer[x]
    ph.forEach((n,i)=>{
        n.innerHTML=data.panel.heads[x][i]
    })


}














// variables
const dayeres=document.querySelectorAll(".dayere");
const talafat=document.querySelector(".talafat");
const tanks=document.querySelector(".tanks")
const earplane=document.querySelector(".earplane")
const res=document.querySelector(".res")
const panel=document.querySelector(".panel")


const Chractersmein=document.querySelector(".Chracters-main")
const Chractersbtn=document.querySelector(".Chracters-main-btn")

// const battelsmein=document.querySelector(".battels-main")
// const battelsbtn=document.querySelector(".battels-main-btn")

const darkmein=document.querySelector(".dark-main")
const darkbtn=document.querySelector(".darkk-main-btn")

const languagemein=document.querySelector(".language-main")
const languagebtn=document.querySelector(".language-main-btn")

const wipenmein=document.querySelector(".wipen-main")
const wipenbtn=document.querySelector(".wipen-main-btn")

const dark=document.querySelector(".d-btn")
const light=document.querySelector(".l-btn")
const html=document.querySelector(".htmml");
// lets
let i=0;
let isdark=JSON.parse(localStorage.getItem("isdark"))||false;

let ise=JSON.parse(localStorage.getItem("ise"))||true;

// const islg=window.matchMedia("(min-width: 1025px)").matches;


// functions
const panelHandler=()=>{
    panel.classList.toggle("w-0")
    panel.classList.toggle("w-[50vw]")
}
const ChractersHandler=()=>{
    Chractersbtn.classList.toggle("-rotate-[135deg]")
    Chractersbtn.classList.toggle("rotate-45")
    Chractersmein.classList.toggle("h-0")
    Chractersmein.classList.toggle("p-2")
    Chractersmein.classList.toggle("overflow-y-hidden")
}
// const battelsHandler=()=>{
//     battelsbtn.classList.toggle("-rotate-[135deg]")
//     battelsbtn.classList.toggle("rotate-45")
//     battelsmein.classList.toggle("h-0")
//     battelsmein.classList.toggle("p-2")
//     battelsmein.classList.toggle("overflow-y-hidden")
// }
const wipenHandler=()=>{
    wipenbtn.classList.toggle("-rotate-[135deg]")
    wipenbtn.classList.toggle("rotate-45")
    wipenmein.classList.toggle("h-0")
    wipenmein.classList.toggle("p-2")
    wipenmein.classList.toggle("overflow-y-hidden")
}
const languageHandler=()=>{
   languagebtn.classList.toggle("-rotate-[135deg]")
   languagebtn.classList.toggle("rotate-45")
   languagemein.classList.toggle("h-0")
   languagemein.classList.toggle("p-2")
   languagemein.classList.toggle("overflow-y-hidden")
}
const darkkHandler=()=>{
   darkbtn.classList.toggle("-rotate-[135deg]")
   darkbtn.classList.toggle("rotate-45")
   darkmein.classList.toggle("h-0")
   darkmein.classList.toggle("p-2")
   darkmein.classList.toggle("overflow-y-hidden")
}
const talafatNav=()=>{
    const section = talafat;

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                document.querySelectorAll(".progress-bar").forEach(bar => {
                    const finalWidth = bar.getAttribute("data-width");
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                    void bar.offsetWidth
                    bar.style.setProperty("--final-width",finalWidth);
                    bar.classList.add("animate-load");
                });

                // observer.unobserve(section);
            }else{
                document.querySelectorAll(".progress-bar").forEach(bar => {
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                });
            }
        });
    }, {
        threshold: 0.25 
});

observer.observe(section);
}
const dayereHandler=()=>{
    setInterval(() => {
        if(i==0){
            dayeres[dayeres.length-1]?.classList.add("bg-neutral-700")
            dayeres[dayeres.length-1]?.classList.remove("bg-teal-800")
            dayeres[dayeres.length-1]?.classList.remove("animate-ping")
        }
        dayeres[i-1]?.classList.add("bg-neutral-700")
        dayeres[i-1]?.classList.remove("bg-teal-800")
        dayeres[i-1]?.classList.remove("animate-ping")
        
        dayeres[i].classList.remove("bg-neutral-700")
        dayeres[i].classList.add("bg-teal-800")
        dayeres[i].classList.add("animate-ping")

        if(i!=dayeres.length-1)
            i++
        else{
            i=0
        }
    }, 1000);
}
const tanksNav=()=>{
    const section = tanks;

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                document.querySelectorAll(".progress-bart").forEach(bar => {
                    const finalWidth = bar.getAttribute("data-width");
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                    void bar.offsetWidth
                    bar.style.setProperty("--final-width",finalWidth);
                    bar.classList.add("animate-load");
                });

                // observer.unobserve(section);
            }else{
                document.querySelectorAll(".progress-bart").forEach(bar => {
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                });
            }
        });
    }, {
        threshold: 0.25 
});

observer.observe(section);
}
const earplaneNav=()=>{
    const section = earplane;

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                document.querySelectorAll(".progress-barte").forEach(bar => {
                    const finalWidth = bar.getAttribute("data-width");
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                    void bar.offsetWidth
                    bar.style.setProperty("--final-width",finalWidth);
                    bar.classList.add("animate-load");
                });

                // observer.unobserve(section);
            }else{
                document.querySelectorAll(".progress-barte").forEach(bar => {
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                });
            }
        });
    }, {
        threshold: 0.25 
});

observer.observe(section);
}
const resNav=()=>{
    const section = res;

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                document.querySelectorAll(".progress-barter").forEach(bar => {
                    const finalWidth = bar.getAttribute("data-width");
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                    void bar.offsetWidth
                    bar.style.setProperty("--final-width",finalWidth);
                    bar.classList.add("animate-load");
                });

                // observer.unobserve(section);
            }else{
                document.querySelectorAll(".progress-barter").forEach(bar => {
                    bar.style.width="0%"
                    bar.classList.remove("animate-load")
                });
            }
        });
    }, {
        threshold: 0.25 
});

observer.observe(section);
}

const darkHandler=()=>{
    if(JSON.parse(localStorage.getItem("isdark")))
        html.classList.add("dark")
    else
        html.classList.remove("dark")
}



















//DOM
















panelbtn.addEventListener("click",panelHandler)
hidebtn.addEventListener("click",panelHandler)
Chractersbtn.addEventListener("click",ChractersHandler)
// battelsbtn.addEventListener("click",battelsHandler)
wipenbtn.addEventListener("click",wipenHandler)
darkbtn.addEventListener("click",darkkHandler)
languagebtn.addEventListener("click",languageHandler)

dark.addEventListener("click",()=>{
    localStorage.setItem("isdark",JSON.stringify(true))
    darkHandler()
})
light.addEventListener("click",()=>{
    localStorage.setItem("isdark",JSON.stringify(false))
    darkHandler()
})

ef.addEventListener("click",()=>{
    localStorage.setItem("ise",JSON.stringify(true))
    goat()
})
ff.addEventListener("click",()=>{
    console.log("ss");
    
    localStorage.setItem("ise",JSON.stringify(false))
    goat()
})


dayereHandler();
talafatNav();
tanksNav();
earplaneNav();
resNav();
darkHandler();
goat()